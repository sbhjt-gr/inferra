<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inferra - AI Chat</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1E1326;
            color: #fff;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .app-header {
            background: #660880;
            height: 52px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 10;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
        }

        .header-left {
            display: flex;
            align-items: center;
        }

        .app-title {
            font-size: 18px;
            font-weight: bold;
            color: #fff;
            letter-spacing: 0.2px;
        }

        .header-buttons {
            display: flex;
            gap: 12px;
        }

        .header-button {
            padding: 8px 12px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.15);
            border: none;
            color: #fff;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
        }

        .header-button:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        .model-selector-container {
            border-bottom: 1px solid #3D2D4A;
            padding: 12px 16px;
            background: #1E1326;
            position: fixed;
            top: 52px;
            left: 0;
            right: 0;
            z-index: 9;
        }

        .model-selector {
            background: #2A1F37;
            border: 1px solid #3D2D4A;
            border-radius: 8px;
            padding: 12px 16px;
            color: #BDB7C4;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
        }

        .model-selector:hover {
            border-color: #9C38C0;
        }

        .model-text {
            font-size: 14px;
        }

        .model-chevron {
            font-size: 14px;
            color: #BDB7C4;
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            margin-top: 100px;
            margin-bottom: 100px;
        }

        .chat-view {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .message {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 18px;
            word-wrap: break-word;
            line-height: 1.4;
        }

        .message.user {
            background: #9C38C0;
            color: #fff;
            align-self: flex-end;
            margin-left: auto;
        }

        .message.assistant {
            background: #2A1F37;
            color: #fff;
            align-self: flex-start;
            border: 1px solid #3D2D4A;
        }

        .welcome-message {
            text-align: center;
            color: #BDB7C4;
            padding: 40px 20px;
            font-size: 16px;
        }

        .welcome-title {
            font-size: 24px;
            font-weight: bold;
            color: #9C38C0;
            margin-bottom: 12px;
        }

        .chat-input-container {
            border-top: 1px solid #3D2D4A;
            padding: 16px;
            background: #1E1326;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 9;
        }

        .chat-input-wrapper {
            display: flex;
            align-items: flex-end;
            gap: 12px;
            background: #2A1F37;
            border: 1px solid #3D2D4A;
            border-radius: 24px;
            padding: 8px 16px;
            min-height: 48px;
        }

        .chat-input {
            flex: 1;
            background: transparent;
            border: none;
            color: #fff;
            font-size: 16px;
            resize: none;
            outline: none;
            min-height: 32px;
            max-height: 120px;
            font-family: inherit;
            line-height: 1.4;
            padding: 8px 0;
        }

        .chat-input::placeholder {
            color: #BDB7C4;
        }

        .input-button {
            padding: 8px 12px;
            border: none;
            background: transparent;
            color: #BDB7C4;
            cursor: pointer;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
        }

        .input-button:hover {
            background: rgba(156, 56, 192, 0.1);
            color: #9C38C0;
        }

        .send-button {
            background: #9C38C0;
            color: #fff;
        }

        .send-button:hover {
            background: #7B2F99;
        }

        .send-button:disabled {
            background: #3D2D4A;
            color: #666;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            .message {
                max-width: 95%;
            }

            .chat-input-wrapper {
                padding: 6px 12px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="app-header">
            <div class="header-left">
                <div class="app-title">Inferra</div>
            </div>
            <div class="header-buttons">
                <button class="header-button" onclick="startNewChat()">
                    New Chat
                </button>
                <button class="header-button" onclick="openChatHistory()">
                    History
                </button>
            </div>
        </div>

        <div class="model-selector-container">
            <div class="model-selector" onclick="openModelSelector()">
                <span class="model-text">Select a model to start chatting</span>
                <span class="model-chevron">â–¼</span>
            </div>
        </div>

        <div class="chat-container">

            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <textarea
                        class="chat-input"
                        id="messageInput"
                        placeholder="Type here..."
                        rows="1"
                        onkeydown="handleKeyDown(event)"
                        oninput="adjustTextareaHeight()"
                    ></textarea>
                    <button class="send-button input-button" id="sendButton" onclick="sendMessage()">
                        <span id="sendButtonText">Send</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let messages = [];
        let isTyping = false;

        function startNewChat() {
            messages = [];
            renderMessages();
            showWelcomeMessage();
        }

        function openChatHistory() {
            alert('Chat history feature - connect to your app navigation');
        }

        function openModelSelector() {
            alert('Model selector - integrate with your model selection logic');
        }

        function attachFile() {
            alert('File attachment feature');
        }

        function toggleMicrophone() {
            alert('Voice recording feature');
        }

        function adjustTextareaHeight() {
            const textarea = document.getElementById('messageInput');
            textarea.style.height = 'auto';
            textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
        }

        function handleKeyDown(event) {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();

            if (!message || isTyping) return;

            messages.push({
                id: Date.now(),
                content: message,
                role: 'user'
            });

            input.value = '';
            input.style.height = 'auto';
            renderMessages();

            simulateAIResponse(message);
        }

        function simulateAIResponse(userMessage) {
            isTyping = true;
            updateSendButton();

            setTimeout(() => {
                const responses = [
                    "I'm a web replica of your Inferra app running on your {{PLATFORM}} device. The actual AI processing would happen in your React Native app.",
                    "This is a demonstration of how your HomeScreen would look in a web browser. Your real AI models and chat functionality are in the mobile app.",
                    "Hello! I'm simulating the chat interface from your mobile app. The real magic happens in your React Native application with actual AI models.",
                ];

                messages.push({
                    id: Date.now(),
                    content: responses[Math.floor(Math.random() * responses.length)],
                    role: 'assistant'
                });

                isTyping = false;
                updateSendButton();
                renderMessages();
            }, 1500);
        }

        function renderMessages() {
            const chatView = document.getElementById('chatView');

            if (messages.length === 0) {
                showWelcomeMessage();
                return;
            }

            chatView.innerHTML = messages.map(message =>
                '<div class="message ' + message.role + '">' +
                message.content.replace(/\n/g, '<br>') +
                '</div>'
            ).join('');

            chatView.scrollTop = chatView.scrollHeight;
        }

        function showWelcomeMessage() {
            const chatView = document.getElementById('chatView');
            chatView.innerHTML =
                '<div class="welcome-message">' +
                '<div class="welcome-title">Welcome to Inferra</div>' +
                '<p>Your AI-powered chat assistant running on {{PLATFORM}}</p>' +
                '<p>Select a model above to start your conversation</p>' +
                '<p><small>Server started: {{START_TIME}}</small></p>' +
                '</div>';
        }

        function updateSendButton() {
            const sendButton = document.getElementById('sendButtonText');
            const button = document.getElementById('sendButton');
            button.disabled = isTyping;

            if (isTyping) {
                sendButton.textContent = 'Stop';
            } else {
                sendButton.textContent = 'Send';
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            showWelcomeMessage();
        });
    </script>
</body>
</html>
